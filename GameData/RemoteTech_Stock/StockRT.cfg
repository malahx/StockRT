// StockRT
// Copyright 2014 Malah
// This is free and unencumbered software released into the public domain.

// Tweak the stock Antenna / Dish
// longAntenna(Communotron 16) replaces RTLongAntenna2(Communotron 32)
@PART[longAntenna]:FOR[RemoteTech_Stock]:HAS[@MODULE[ModuleRTAntenna]]:NEEDS[RemoteTech]:AFTER[RemoteTech]:Final
{
	@MODULE[ModuleRTAntenna]
	{
        @Mode1OmniRange = 5000000
		@MaxQ = 3000
		@EnergyCost = 0.6
	}
	
}

// commDish(Communotron 88-88) replaces RTGigaDish1(Reflectron GX-128)
@PART[commDish]:FOR[RemoteTech_Stock]:HAS[@MODULE[ModuleRTAntenna]]:NEEDS[RemoteTech]:AFTER[RemoteTech]:Final
{
	@MODULE[ModuleRTAntenna]
	{
        @Mode1DishRange = 400000000000
		@EnergyCost = 2.80
		@DishAngle = 5.0
	}
}

// Unlock PassiveAntenna in survivability tech.
@PART[RTPassiveAntennaTech]:FOR[RemoteTech_Stock]:NEEDS[RemoteTech]:AFTER[RemoteTech]:Final
{
		@TechRequired = survivability
		@title = Communication Tech
		@description = Allows RemoteTech probe and command pods cores to contact ships within 100 km without the need for a dedicated antenna.
}

@PART[*]:FOR[RemoteTech_Stock]:HAS[@MODULE[ModuleRTAntennaPassive]]:NEEDS[RemoteTech]:AFTER[RemoteTech]:Final
{
	@MODULE[ModuleRTAntennaPassive]
	{
		@TechRequired = survivability
	}
}

// Add an antenna to all the Commands Pods to replace RTShortAntenna1(Reflectron DP-10).
@PART[*]:HAS[@MODULE[ModuleCommand],!MODULE[ModuleSPU]]:NEEDS[RemoteTech]:AFTER[RemoteTech]:Final
{
	%MODULE[ModuleSPU] {
	}
}
@PART[*]:FOR[RemoteTech_Stock]:HAS[@MODULE[ModuleCommand],!MODULE[ModuleRTAntennaPassive]]:NEEDS[RemoteTech]:AFTER[RemoteTech]:Final
{
	%MODULE[ModuleRTAntennaPassive]	{
	%TechRequired = survivability
	%OmniRange = 100000
		
		%TRANSMITTER {
			%PacketInterval = 0.3
			%PacketSize = 2
			%PacketResourceCost = 15.0
		}
	}
}

// Tweak probeCores to replace RTShortAntenna1(Reflectron DP-10) and to have a better techtree integration.
@PART[probeCoreSphere]:FOR[RemoteTech_Stock]:NEEDS[RemoteTech]:AFTER[RemoteTech]:Final
{
	@MODULE[ModuleRTAntennaPassive]
	{
        @OmniRange = 100000
	}
}
@PART[probeCoreOcto]:FOR[RemoteTech_Stock]:NEEDS[RemoteTech]:AFTER[RemoteTech]:Final
{
	@MODULE[ModuleRTAntennaPassive]
	{
        @OmniRange = 500000
	}
}
@PART[probeCoreOcto2]:FOR[RemoteTech_Stock]:NEEDS[RemoteTech]:AFTER[RemoteTech]:Final
{
	@MODULE[ModuleRTAntennaPassive]
	{
        @OmniRange = 250000
	}
}
@PART[probeCoreHex,probeStackSmall]:FOR[RemoteTech_Stock]:NEEDS[RemoteTech]:AFTER[RemoteTech]:Final
{
	@MODULE[ModuleRTAntennaPassive]
	{
        @OmniRange = 1000000
	}
}
@PART[probeCoreCube]:FOR[RemoteTech_Stock]:NEEDS[RemoteTech]:AFTER[RemoteTech]:Final
{
	@MODULE[ModuleRTAntennaPassive]
	{
        @OmniRange = 2000000
	}
}
@PART[probeStackLarge]:FOR[RemoteTech_Stock]:NEEDS[RemoteTech]:AFTER[RemoteTech]:Final
{
	@MODULE[ModuleRTAntennaPassive]
	{
        @OmniRange = 3000000
	}
}
@PART[mk2DroneCore]:FOR[RemoteTech_Stock]:NEEDS[RemoteTech]:AFTER[RemoteTech]:Final
{
	@MODULE[ModuleRTAntennaPassive]
	{
        @OmniRange = 1500000
	}
}

// Disable the RemoteTech parts.
@PART[RTShortDish1,RTShortDish2,RTShortAntenna1,RTLongDish1,RTLongDish2,RTLongAntenna2,RTLongAntenna3,RTGigaDish1,RTGigaDish2]:FOR[RemoteTech_Stock]:NEEDS[RemoteTech]:AFTER[RemoteTech]:Final
{
	@TechRequired = unassigned
	@category = none
}
